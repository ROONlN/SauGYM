@{
    ViewData["Title"] = "AI Coach";
}

<div class="container py-5">

    <div class="text-center mb-5">
        <h1 class="display-4 fw-bold text-white" style="letter-spacing: 2px;">AI PERFORMANCE CENTER</h1>
        <p class="lead text-secondary">Data-driven planning and visual motivation.</p>
    </div>

    <div class="card shadow-lg border-0 mb-5" style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border-left: 5px solid #06b6d4;">
        <div class="card-body p-5">
            <div class="row align-items-center">
                <div class="col-lg-4">
                    <h3 class="fw-bold text-white mb-3"><i class="bi bi-cpu-fill text-info"></i> Smart Planner</h3>
                    <p class="text-secondary">Enter your metrics. Our algorithm calculates your BMI and generates a personalized nutrition & workout roadmap instantly.</p>
                </div>
                <div class="col-lg-8">
                    <form asp-action="GetFitnessPlan" method="post" class="row g-3">
                        <div class="col-md-3">
                            <label class="form-label text-secondary small">Age</label>
                            <input type="number" name="age" class="form-control bg-dark text-white border-secondary" value="@ViewBag.Age" required placeholder="25">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label text-secondary small">Weight (kg)</label>
                            <input type="number" name="weight" class="form-control bg-dark text-white border-secondary" value="@ViewBag.Weight" required placeholder="75">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label text-secondary small">Height (cm)</label>
                            <input type="number" name="height" class="form-control bg-dark text-white border-secondary" value="@ViewBag.Height" required placeholder="180">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label text-secondary small">Goal</label>
                            <select name="goal" class="form-select bg-dark text-white border-secondary">
                                <option value="Weight Loss">Weight Loss</option>
                                <option value="Muscle Gain">Muscle Gain</option>
                                <option value="Get Fit">Get Fit</option>
                            </select>
                        </div>
                        <div class="col-12 mt-4 text-end">
                            <button type="submit" class="btn btn-info px-5 fw-bold text-white">GENERATE PLAN <i class="bi bi-arrow-right"></i></button>
                        </div>
                    </form>
                </div>
            </div>

            @if (ViewBag.Result != null)
            {
                <div class="mt-4 p-4 rounded border border-info" style="background-color: rgba(6, 182, 212, 0.1);">
                    <h5 class="text-info mb-3"><i class="bi bi-check-circle-fill"></i> Your Personalized Plan</h5>
                    <p style="white-space: pre-line; color: #e2e8f0; font-size: 1.05rem;">@ViewBag.Result</p>
                </div>
            }
        </div>
    </div>

    <div class="card shadow-lg border-0 overflow-hidden" style="background-color: #000;">
        <div class="row g-0">
            <div class="col-md-5 p-5 d-flex flex-column justify-content-center border-end border-secondary">
                <h3 class="fw-bold text-white mb-2"><i class="bi bi-palette-fill text-success"></i> Body Visualizer</h3>
                <p class="text-secondary mb-4 small">See your potential. AI generates a realistic photo of your goal physique.</p>

                <form asp-action="GenerateTransformationImage" method="post">
                    <div class="mb-3">
                        <label class="form-label text-secondary small">Gender</label>
                        <select name="gender" class="form-select bg-dark text-white border-secondary">
                            <option value="man">Male</option>
                            <option value="woman">Female</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="form-label text-secondary small">Physique Goal</label>
                        <select name="goal" class="form-select bg-dark text-white border-secondary">
                            <option value="muscular bodybuilder">Bodybuilder (Massive)</option>
                            <option value="lean athletic fit">Athletic & Shredded</option>
                            <option value="yoga flexible body">Slim & Flexible</option>
                            <option value="strong powerlifter">Powerlifter (Strong)</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-success w-100 fw-bold">RENDER SIMULATION <i class="bi bi-magic"></i></button>
                </form>

                @if (ViewBag.ImageError != null)
                {
                    <div class="alert alert-warning mt-3 small">@ViewBag.ImageError</div>
                }
            </div>

            <div class="col-md-7 d-flex align-items-center justify-content-center bg-dark" style="min-height: 400px; background-image: url('https://www.transparenttextures.com/patterns/cubes.png');">
                @if (ViewBag.GeneratedImage != null)
                {
                    <div class="text-center p-3">
                        <img src="data:image/jpeg;base64,@ViewBag.GeneratedImage" class="img-fluid shadow-lg rounded border border-success" style="max-height: 500px;" />
                        <p class="text-success mt-2 small fw-bold">AI GENERATED RESULT</p>
                    </div>
                }
                else
                {
                    <div class="text-center text-secondary opacity-50">
                        <i class="bi bi-image display-1"></i>
                        <p class="mt-2">Simulation will appear here</p>
                    </div>
                }
            </div>
        </div>
    </div>

</div>